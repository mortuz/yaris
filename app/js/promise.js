window.setImmediate||function(){"use strict";var i=0,o={},u=!0,r=Array.prototype.slice,c="setImmediatePolyfillMessage";function f(n){var e,t=n.data;"string"==typeof t&&0==t.indexOf(c)&&(e=o[t])&&(delete o[t],function(n){var e=n[0];switch(n.length){case 1:return e();case 2:return e(n[1]);case 3:return e(n[1],n[2])}e.apply(window,r.call(n,1))}(e))}window.setImmediate=function(){for(var n=i++,e=c+n,t=arguments.length,r=new Array(t);t--;)r[t]=arguments[t];return o[e]=r,u&&(u=!1,window.addEventListener("message",f)),window.postMessage(e,"*"),n},window.clearImmediate=function(n){delete o[c+n]}}(),function(n){"use strict";var d="[[PromiseStatus]]",h="[[PromiseValue]]",w="[[OnFulfilled]]",m="[[OnRejected]]",a="[[OriginalError]]",r="pending",o="internal pending",p="fulfilled",y="rejected",s="not an array.",e='constructor Promise requires "new".',v="then() cannot return same Promise that it resolves.",g=n.setImmediate||require("timers").setImmediate,l=Array.isArray||function(n){return"[object Array]"==Object.prototype.toString.call(n)};function i(n){this[a]=n}function P(n){return n instanceof i}function u(n){return"function"==typeof n}function j(n){return n instanceof T}function t(n){return n}function c(n){throw n}function f(n){delete n[w],delete n[m]}function E(n){var e,t=n.length;for(e=0;e<t;e++)n[e]()}function I(n,e,t){var r=O(t);j(r)?r.then(n,e):P(r)?e(r[a]):n(t)}function O(t){var r,n;if(j(t))return t;if(n=t,Object(n)===n){try{r=t.then}catch(n){return new i(n)}if(u(r))return new T(function(n,e){g(function(){try{r.call(t,n,e)}catch(n){e(n)}})})}return null}function b(e,n){function t(n){e[d]==r&&A(e,n)}try{n(function(n){e[d]==r&&function e(t,n){var r,i=O(n);j(i)?(t[d]=o,i.then(function(n){e(t,n)},function(n){A(t,n)})):P(i)?A(t,i[a]):(t[d]=p,t[h]=n,(r=t[w])&&r.length&&(f(t),E(r)))}(e,n)},t)}catch(n){t(n)}}function A(n,e){var t=n[m];n[d]=y,n[h]=e,t&&t.length&&(f(n),E(t))}function T(n){if(!j(this))throw new TypeError(e);this[d]=r,this[h]=void 0,b(this,n)}T.prototype.then=function(f,a){var s,l=this;return f=u(f)?f:t,a=u(a)?a:c,s=new T(function(t,r){function n(n){var e;try{e=n(l[h])}catch(n){return void r(n)}e===s?r(new TypeError(v)):I(t,r,e)}function e(){g(n,f)}function i(){g(n,a)}switch(l[d]){case p:e();break;case y:i();break;default:u=e,c=i,(o=l)[w]||(o[w]=[],o[m]=[]),o[w].push(u),o[m].push(c)}var o,u,c})},T.prototype.catch=function(n){return this.then(t,n)},T.resolve=function(t){var r=O(t);return j(r)?r:new T(function(n,e){P(r)?e(r[a]):n(t)})},T.reject=function(t){return new T(function(n,e){e(t)})},T.race=function(i){return new T(function(n,e){var t,r;if(l(i))for(r=i.length,t=0;t<r;t++)I(n,e,i[t]);else e(new TypeError(s))})},T.all=function(f){return new T(function(t,n){var e,r,i,o,u=0,c=0;if(l(f)){for(r=(f=f.slice(0)).length,o=0;o<r;o++)j(e=O(i=f[o]))?(c++,e.then(function(e){return function(n){f[e]=n,++u==c&&t(f)}}(o),n)):P(e)?n(e[a]):f[o]=i;c||t(f)}else n(new TypeError(s))})},"undefined"!=typeof module&&module.exports?module.exports=n.Promise||T:n.Promise||(n.Promise=T)}(this);